var U=Object.defineProperty,V=Object.defineProperties;var B=Object.getOwnPropertyDescriptors;var _=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;var R=(r,s,n)=>s in r?U(r,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[s]=n,l=(r,s)=>{for(var n in s||(s={}))G.call(s,n)&&R(r,n,s[n]);if(_)for(var n of _(s))H.call(s,n)&&R(r,n,s[n]);return r},c=(r,s)=>V(r,B(s));import{r as d,P as k,l as q,j as e,_ as E,a as m,B as S,F as z,b as D,c as Q,d as Y,h as J,I as K,e as W,f as X,g as Z,i as j,k as ee,m as te,R as C,S as L,n as $,o as re,p as ne,q as A,s as se,t as oe}from"./vendor.c4244ced.js";const ie=function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))f(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const h of a.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&f(h)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerpolicy&&(a.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?a.credentials="include":i.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function f(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}};ie();const ae="play_init",le="playing_progress",ce="track",de="play",ue="pause",me="next",he="prev",pe="volume_change",M=d.exports.createContext(),P=()=>d.exports.useContext(M),O=({ENDPOINT:r,children:s})=>{const[n,f]=d.exports.useState(null),[i,a]=d.exports.useState({title:"Title",album:"Album",artist:"Artist",coverImage:"",volume:0,progress:"0",duration:"0",isPlaying:!1}),[h,p]=d.exports.useState({positionLight:!1,cruiseLight:!1,fullheadLight:!1,motorProblem:!1,batteryProblem:!1,handbrakeProblem:!1,turnRight:!1,turnLeft:!1}),[y,x]=d.exports.useState({airSpeedFan:0,airTemperature:0,airCarTemperature:0,airConditioner:!1}),[v,w]=d.exports.useState({isCalling:!1,callAnswered:!1,phoneNumber:"",path:""});let g;const u=()=>{g=setTimeout(()=>{a(t=>c(l({},t),{progress:`${E.toNumber(t.progress)+1e3}`})),g&&u()},1e3)},b=()=>{a(t=>c(l({},t),{isPlaying:!1})),g&&clearTimeout(g)},N=()=>{a(t=>c(l({},t),{isPlaying:!0})),g&&clearTimeout(g),u()},I=(t,o)=>{n&&(console.log("emit",t,o),n.emit(t,o))};d.exports.useEffect(()=>{const t=q(r);f(t)},[f]),d.exports.useEffect(()=>{n&&(console.log("socket connected"),n.on("track_info",t=>{a(o=>c(l({},o),{album:t.album,artist:t.artist,coverImage:t.coverImage,duration:t.duration,title:t.title,progress:t.progress})),g&&clearTimeout(g),u()}),n.on(ae,t=>{a(o=>c(l({},o),{album:t.album,artist:t.artist,coverImage:t.coverImage,duration:t.duration,isPlaying:!0,title:t.title})),g&&clearTimeout(g),u()}),n.on(ce,t=>{a(o=>c(l({},o),{album:t.album,artist:t.artist,duration:t.duration,isPlaying:!0,title:t.title}))}),n.on(de,()=>{N()}),n.on(me,()=>{a(t=>c(l({},t),{progress:"0"})),N()}),n.on(he,()=>{a(t=>c(l({},t),{progress:"0"})),N()}),n.on(ue,()=>{console.log("pause"),b()}),n.on(pe,t=>{a(o=>c(l({},o),{volume:t}))}),n.on(le,t=>{a(o=>c(l({},o),{progress:t}))}),n.on("connect",()=>{console.log("LOGGED IN",n)}),n.on("initial_state",t=>{console.log("car initial state",JSON.parse(t))}),n.on("POSITION_LIGHT",t=>{p(o=>c(l({},o),{positionLight:t}))}),n.on("CRUISE_LIGHT",t=>{p(o=>c(l({},o),{cruiseLight:t}))}),n.on("FULLHEAD_LIGHT",t=>{p(o=>c(l({},o),{fullheadLight:t}))}),n.on("MOTOR",t=>{p(o=>c(l({},o),{motorProblem:t}))}),n.on("BATTERY",t=>{p(o=>c(l({},o),{batteryProblem:t}))}),n.on("HANDBRAKE",t=>{p(o=>c(l({},o),{handbrakeProblem:t}))}),n.on("TURN_SIGNAL_RIGHT",t=>{p(o=>c(l({},o),{turnRight:t}))}),n.on("TURN_SIGNAL_LEFT",t=>{p(o=>c(l({},o),{turnLeft:t}))}),n.on("AIR_SPEEDFAN",t=>{x(o=>c(l({},o),{airSpeedFan:t}))}),n.on("AIR_TEMPERATURE",t=>{x(o=>c(l({},o),{airTemperature:t}))}),n.on("CAR_TEMPERATURE",t=>{x(o=>c(l({},o),{carTemperature:t}))}),n.on("AIR_CONDITIONER",t=>{x(o=>c(l({},o),{airConditioner:t}))}),n.on("PHONE_CALLING",t=>{console.log("phone calling",t);const o=JSON.parse(t);w(T=>c(l({},T),{isCalling:o.isCalling,phoneNumber:o.phoneNumber,path:o.path}))}),n.on("ANWSER_CALL",t=>{const o=JSON.parse(t);w(T=>c(l({},T),{isCalling:!1,path:o.path,callAnswered:!0}))}),n.on("HANGUP_CALL",()=>{w(t=>c(l({},t),{isCalling:!1,path:"",callAnswered:!1}))}))},[n]);const F=d.exports.useMemo(()=>({player:i,setPlayer:a,carCondition:h,carTemperature:y,phone:v,onEmit:I}),[h,y,I,v,i]);return e(M.Provider,{value:F,children:s})};O.propTypes={ENDPOINT:k.string.isRequired,children:k.node.isRequired};const ge="play_request",fe="pause_request",ve="next_request",be="prev_request",Ne="volume_change_request";const ye=()=>{const{player:r,onEmit:s}=P(),[n,f]=d.exports.useState(!1),i=(u,b)=>`${Math.round(E.toNumber(`${u}`)/E.toNumber(`${b}`)*180)}deg`,a=u=>u<=5?"low":u<=75?"medium":"high",h=u=>u<=9?`0${u}`:u,p=u=>{const b=J.duration(u,"milliseconds");return`${b.hours()>0?`${h(b.hours())}:`:""}${h(b.minutes())}:${h(b.seconds())}`},y=()=>{console.log("play"),s(ge)},x=()=>{console.log("pause"),s(fe)},v=()=>{console.log("pause"),s(ve)},w=()=>{s(be)},g=u=>{const b=u.target.value;s(Ne,b)};return!n&&E.toNumber(r.duration)>0&&E.toNumber(r.progress)>=E.toNumber(r.duration)&&(f(!0),s("track_informations_request")),d.exports.useEffect(()=>{r.isPlaying&&f(!1)},[r]),m("div",{id:"player",className:"center",children:[e("div",{className:"music-cover-ring center"}),m("div",{className:"music-cover center",style:{backgroundImage:`url(${r.coverImage})`},children:[e("div",{className:"music-progress-text",children:p(r.progress)}),e("div",{className:"music-progress center",children:e("div",{className:"progress",style:{transform:`rotate(${i(r.progress,r.duration)})`}})}),r.isPlaying?e(S,{className:"pause-btn control-btn ripple center border-0",onClick:()=>x(),children:e(z,{})}):e(S,{className:"play-btn control-btn ripple center border-0",onClick:()=>y(),children:e(D,{})})]}),m("div",{className:"music-info",children:[m("div",{className:"music-volume-control",children:[e("span",{className:`mdi mdi-volume-${a(r.volume)}`}),e("input",{type:"range",value:r.volume,onChange:g}),e("span",{children:r.volume})]}),e("div",{className:"title text-white",children:r.title}),e("div",{className:"album",children:r.artist})]}),m("div",{className:"music-controls center",children:[e(S,{type:"button",className:"music-left-controls d-flex justify-content-center align-items-center border-0 bg-transparent",onClick:w,children:e(Q,{color:"grey",size:40})}),e("div",{className:"spacer"}),e(S,{type:"button",className:"music-right-controls d-flex justify-content-center align-items-center border-0 bg-transparent",onClick:v,children:e(Y,{color:"grey",size:40})})]})]})};var xe="./assets/mdi_logo.5e73d516.png";const we=()=>m("div",{id:"player",className:"center d-flex justify-content-center align-items-center flex-column",children:[e("h1",{className:"text-white",children:"AirPod"}),e("img",{src:xe,alt:"mdi logo",className:"mdi-logo w-75"})]});const Se=()=>{const[r,s]=d.exports.useState(!1),[n,f]=d.exports.useState(!1),{phone:i,onEmit:a}=P(),h=()=>{i.isCalling&&(console.log("answer call",i.path),a("answer_call_request",i.path))},p=()=>{console.log("hangup call",i.path),a("hangup_call_request",i.path)},y=()=>{s(!r),console.log("mute microphone",r),a("mute_microphone",r)};return e("div",{id:"player",className:"center d-flex justify-content-center align-items-center flex-column",children:m("div",{className:"phone-container d-flex position-relative justify-content-center align-items-center",children:[e(S,{className:"bg-transparent shadow-none border-0 position-absolute top-0 start-0 m-2",onClick:()=>y(),children:r?e(K,{className:"rounded-circle bg-secondary bg-gradient p-3",size:60,color:"white"}):e(W,{className:"rounded-circle bg-secondary bg-gradient p-3",size:60,color:"white"})}),e(S,{className:" bg-transparent shadow-none border-0 position-absolute bottom-0 start-0 m-2",onClick:()=>f(!n),children:n?e(X,{className:"rounded-circle bg-secondary bg-gradient p-3 ",size:60,color:"white"}):e(Z,{className:"rounded-circle bg-secondary bg-gradient p-3",size:60,color:"white"})}),m("div",{className:"d-flex flex-column align-items-center",children:[e("span",{className:"text-white mb-1",children:i.phoneNumber}),e(S,{onClick:()=>h(),className:`${i.isCalling&&"pulse"} rounded-circle bg-transparent svg-shadow border-0 p-0 m-0 `,children:e(j,{className:"rounded-circle bg-success bg-gradient p-3",size:160,color:"white"})})]}),e(S,{onClick:()=>p(),className:"rounded-circle bg-transparent svg-shadow border-0 p-0 m-1 position-absolute bottom-0 end-0",children:e(j,{className:"PhoneEnd rounded-circle bg-danger bg-gradient p-3 ",size:80,color:"white"})})]})})};var Ce="./assets/battery.be6d823a.svg",Ee="./assets/ic-feu-route.566e2a03.svg",Pe="./assets/ic-feux-position.7515eee5.svg",Ae="./assets/ic-feux-croisement.5e2baa7e.svg",Te="./assets/malfunction-indicador.363feab3.svg",Le="./assets/system-warning.afd8ce82.svg";const Ie=()=>{const{carCondition:r}=P();return e("div",{id:"player",className:"center d-flex justify-content-center align-items-center",children:m("div",{className:"CarCondition-container d-flex position-relative justify-content-center align-items-center flex-column",children:[m("div",{className:"w-100 mt-auto d-flex flex-row justify-content-evenly",children:[e(ee,{size:25,color:"#004700",className:r.turnLeft&&r.turnRight&&"arrow-tick-animation-warning"||r.turnLeft&&!r.turnRight&&"arrow-tick-animation"}),e(te,{size:25,color:"#004700",className:r.turnLeft&&r.turnRight&&"arrow-tick-animation-warning"||r.turnRight&&!r.turnLeft&&"arrow-tick-animation"})]}),e("div",{className:"w-75 h-75 d-flex position-relative justify-content-center align-items-center rounded-circle",children:m("div",{className:"w-100 d-flex flex-column align-items-center",children:[e("h1",{className:"text-white",children:"AirPod"}),m("div",{className:"w-100 d-flex flex-row justify-content-evenly",children:[e(C,{src:Pe,beforeInjection:s=>{s.classList.add(r.positionLight&&"glow-used-light"),s.setAttribute("style","width: 2rem; height: auto;")}}),e("div",{children:e(C,{src:Ae,beforeInjection:s=>{s.classList.add(r.cruiseLight&&"glow-used-light"),s.setAttribute("style","width: 2rem; height: auto;")}})}),e("div",{children:e(C,{src:Ee,beforeInjection:s=>{s.classList.add(r.fullheadLight&&"glow-used-full"),s.setAttribute("style","width: 2rem; height: auto;")}})})]})]})}),m("div",{className:"w-100 mt-auto d-flex flex-column align-items-center",children:[m("div",{className:"w-100 d-flex flex-row justify-content-evenly",children:[e("div",{id:"motor",children:e(C,{src:Te,beforeInjection:s=>{s.classList.add(r.motorProblem&&"glow-alert"),s.setAttribute("style","width: 2rem; height: auto;")}})}),e("div",{id:"battery",children:e(C,{src:Ce,beforeInjection:s=>{s.classList.add(r.batteryProblem&&"glow-alert"),s.setAttribute("style","width: 2rem; height: auto;")}})})]}),e("div",{id:"brake",children:e(C,{src:Le,beforeInjection:s=>{s.classList.add(r.handbrakeProblem&&"glow-alert"),s.setAttribute("style","width: 2rem; height: auto;")}})})]})]})})};const _e=L.default?L.default:L,Re=()=>{const{carTemperature:r,onEmit:s}=P(),[n,f]=d.exports.useState(r.airTemperature),[i,a]=d.exports.useState(n),[h,p]=d.exports.useState(r.airSpeedFan),[y,x]=d.exports.useState(h),[v,w]=d.exports.useState(r.airConditioner);d.exports.useEffect(()=>{w(r.airConditioner),f(r.airTemperature),p(r.airSpeedFan)},[r]);const g=()=>{w(!v),s("air_conditioner",!v)};d.exports.useEffect(()=>{x(v?h:0)},[v]),d.exports.useEffect(()=>{s("air_speedfan",y)},[y]),d.exports.useEffect(()=>{s("air_temperature",i)},[i]);const u={10:e("strong",{children:"10\xB0C"}),20:"20\xB0C",30:"30\xB0C",40:{style:{color:"red"},label:e("strong",{children:"40\xB0C"})}},b={0:e("strong",{children:"0%"}),25:"25%",50:"50%",75:"75%",100:"100%"};return e("div",{id:"player",className:"center d-flex justify-content-center align-items-center",children:m("div",{className:"AirConditioner-container d-flex position-relative justify-content-center align-items-center flex-column",children:[e(_e,{onChange:g,checked:v}),e("div",{className:"w-75 h-75 d-flex position-relative justify-content-center align-items-center rounded-circle",children:m("div",{className:"h-100 w-100 d-flex flex-row align-items-center justify-content-between",children:[e("div",{id:"left",className:"h-75",children:e($,{vertical:!0,min:10,max:40,marks:u,step:1,value:n,onChange:N=>f(N),onAfterChange:N=>a(N)})}),m("div",{id:"center",className:"d-flex flex-column align-items-center",children:[e("div",{children:e("p",{id:"center",className:"text-white bold p-0 m-0",children:v?`Target temperature: ${n}\xB0C`:"Air Conditionner"})}),m("h1",{id:"center",className:"display-1 text-white bold p-0 m-0",children:[r.carTemperature||20,"\xB0C"]}),e(re,{color:"white",size:100,className:"spin",style:y>0&&{animationDuration:`${100/y}s`}})]}),e("div",{id:"right",className:"h-75",children:e($,{vertical:!0,min:0,max:100,marks:b,step:1,value:h,onChange:N=>p(N),onAfterChange:N=>v&&x(N)})})]})})]})})};const ke=()=>{const{phone:r}=P();return e("div",{children:r.isCalling||r.callAnswered?e(Se,{}):m(ne,{className:"center",direction:"horizontal",resistanceRatio:2,simulateTouch:!0,longSwipes:!0,loop:!0,slidesPerView:1,children:[e(A,{children:e(we,{})}),e(A,{children:e(ye,{})}),e(A,{children:e(Ie,{})}),e(A,{children:e(Re,{})})]})})};const je="127.0.0.1:8085";se.render(e(oe.StrictMode,{children:e(O,{ENDPOINT:je,children:e(ke,{})})}),document.getElementById("root"));
//# sourceMappingURL=index.2c983af3.js.map
